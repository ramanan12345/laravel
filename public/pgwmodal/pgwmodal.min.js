/**
 * PgwModal - Version 1.1
 *
 * Copyright 2014, Jonathan M. Piat
 * http://pgwjs.com - http://pagawa.com
 * 
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
(function(a){a.pgwModal=function(g){var b={};var e={close:true,maxWidth:500,loading:"Loading in progress...",error:"An error has occured. Please try again in a few moments."};if(typeof window.pgwModalObject!="undefined"){b=window.pgwModalObject}if((typeof g=="object")&&(!g.pushContent)){if(!g.url&&!g.target&&!g.content){throw new Error('PgwModal - There is no content to display, please provide a config parameter : "url", "target" or "content"')}b.config={};b.config=a.extend({},e,g);window.pgwModalObject=b}var i=function(){var m='<div id="pgwModalWrapper"></div><div id="pgwModal"><div class="pm-container"><div class="pm-body"><a href="javascript:void(0)" class="pm-close" onclick="$.pgwModal(\'close\')"></a><div class="pm-title"></div><div class="pm-content cntr"></div></div></div></div>';a("body").append(m);return true};var j=function(){a("#pgwModal .pm-title, #pgwModal .pm-content").html("");return true};var d=function(){angular.element("body").injector().invoke(function(m){var n=angular.element(a("#pgwModal .pm-content")).scope();m(a("#pgwModal .pm-content"))(n);n.$digest()});return true};var c=function(m){a("#pgwModal .pm-content").html(m);if(b.config.angular){d()}k();return true};var k=function(){var o=a(window).height();var n=a("#pgwModal .pm-body").height();var m=Math.round((o-n)/3);if(m<=0){m=10}a("#pgwModal .pm-body").css("margin-top",m);return true};var f=function(){return b.config.modalData};var l=function(){a("#pgwModal, #pgwModalWrapper").hide();a("body").removeClass("pgwModal");j();delete window.pgwModalObject;return true};var h=function(){if(a("#pgwModal").length==0){i()}else{j()}if(!b.config.close){a("#pgwModal .pm-close").hide()}else{a("#pgwModal .pm-close").show()}if(b.config.title){a("#pgwModal .pm-title").text(b.config.title)}if(b.config.maxWidth){a("#pgwModal .pm-body").css("max-width",b.config.maxWidth)}if(b.config.url){if(b.config.loading){a("#pgwModal .pm-content").html(b.config.loading)}var m={url:g.url,success:function(n){c(n)},error:function(){a("#pgwModal .pm-content").html(b.config.error)}};if(b.config.ajaxOptions){m=a.extend({},m,b.config.ajaxOptions)}a.ajax(m)}else{if(b.config.target){c(a(b.config.target).html())}else{if(b.config.content){c(b.config.content)}}}a("#pgwModal, #pgwModalWrapper").show();a("body").addClass("pgwModal");return true};if((typeof g=="string")&&(g=="close")){return l()}else{if((typeof g=="string")&&(g=="reposition")){return k()}else{if((typeof g=="string")&&(g=="getData")){return f()}else{if((typeof g=="object")&&(g.pushContent)){return c(g.pushContent)}else{if(typeof g=="object"){return h()}}}}}}})(jQuery);
